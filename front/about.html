<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <title>About</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <style>
        @font-face {
            font-family: 'SUITE-Regular';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }

        .lead {
            font-weight: bold;
        }

        * {
            font-family: 'SUITE-Regular', sans-serif;
        }
    </style>
</head>

<body>
    <!-- Responsive navbar-->
    <div id="result"></div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#!">Start your study!</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html" target="_blank">Location</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Header - set the background image for the header in the line below-->
    <header class="py-5 bg-image-full" style="background-image: url('https://source.unsplash.com/wfh8dDlNFOk/1600x900')">
        <div class="text-center my-5">
            <img class="img-fluid rounded-circle mb-4" />
            <h1 class="text-white fs-3 fw-bolder">Recommend Lecture</h1>
            <p class="text-white-50 mb-0" style="font-weight: bold;">ë‹¹ì‹ ì´ ì‘ì„±í•œ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë¶„ì„í•œ ê²°ê³¼... ì„¤ë ˆëŠ” ë§ˆìŒìœ¼ë¡œ</p>
        </div>
    </header>

    <section class="py-5">
        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <h2>ë‹¹ì‹ ì—ê²Œ ì í•©í•œ ê°•ì˜ëŠ” ğŸ“‚ğŸ—‚ï¸</h2>
                    <div id="lectureResult"></div>
                    <div id="chart" style="font-weight: bold;"></div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white">Â© CppVa 2023 hackerground</p>
        </div>
    </footer>

    <script>
        window.addEventListener('DOMContentLoaded', function () {
            var params = new URLSearchParams(window.location.search);
            var values = {
                gender: params.get('gender'),
                age: params.get('age'),
                education: params.get('education'),
                job: params.get('job'),
                marital: params.get('marital'),
                income: params.get('income')
            };
    
            var lectureResult = document.getElementById('lectureResult');
    
            // ì„ íƒëœ ê°’ë“¤ì„ ë°°ì—´ì— ì €ì¥
            var selectedValues = Object.values(values);
            var lectureNames = ["ì»´í“¨í„°/ì •ë³´í™” ìˆ˜ì—…", "ì–´í•™ ìˆ˜ì—…", "ë¬¸í™”/êµì–‘", "ë¬¸í™”/êµì–‘ ìˆ˜ì—…", "ì¼ë°˜ ì§ì—… ê¸°ìˆ  ìˆ˜ì—…", "ì‚¬íšŒë´‰ì‚¬ ìˆ˜ì—…", "ê±´ê°• ìˆ˜ì—…", "ì„±ì¸ê¸°ì´ˆ"];
    
            var output = make_data();
            for (var i = 0; i < selectedValues.length; i++) {
                console.log(selectedValues[i]);
            }
            
            let genders = ["ë‹¹ì‹ ì€ ë‚¨ì„±,", "ë‹¹ì‹ ì€ ì—¬ì„±,"];
            let ages = ["40ëŒ€ ,", "50ëŒ€ ,", "60ëŒ€ ,"];
            let educations = ["ì´ˆë“±í•™êµê¹Œì§€ ì¡¸ì—…í•˜ê±°ë‚˜ ì¡¸ì—…í•˜ì§€ ëª»í•˜ì˜€ê³ ,", "ì¤‘í•™êµê¹Œì§€ ì¡¸ì—…í•˜ì˜€ê³ ,", "ê³ ë“±í•™êµê¹Œì§€ ì¡¸ì—…í•˜ì˜€ê³  ,", "ìµœì†Œ ëŒ€í•™êµë¥¼ ì¡¸ì—…í•˜ì˜€ê³  ,"];
            let jobs = ["í˜„ì¬ ì „ë¬¸ì§ì„ ì¢…ì‚¬í•˜ê³  ,", "í˜„ì¬ ì‚¬ë¬´ì§ì„ ì¢…ì‚¬í•˜ê³  ,", "í˜„ì¬ ì„œë¹„ìŠ¤ì§ì„ ì¢…ì‚¬í•˜ê³ ,", "í˜„ì¬ ë…¸ë™ì§ì„ ì¢…ì‚¬í•˜ê³ ,"];
            let marriage = ["í˜¼ì¸ì„ í•´ë³¸ì ì´ ì—†ëŠ” ë¯¸í˜¼ì´ê³  ,", "í˜¼ì¸ì„ í•œ ê¸°í˜¼ ìƒíƒœì´ê³  ,", "í˜¼ì¸ì„ í•œì ì´ ìˆì§€ë§Œ, í˜„ì¬ëŠ” ë°°ìš°ìë¥¼ ì‚¬ë³„í•œ ìƒíƒœì´ê³  ,", "ì´í˜¼ ë° ê¸°íƒ€ ì‚¬ì •ì´ ìˆê³  ,"];
            let incomes = ["ì›”ìˆ˜ì…ì´ 100ë§Œì› ë¯¸ë§Œì¸ ë‹¹ì‹ ì—ê²Œ ì•Œë§ëŠ” ê°•ì¢ŒëŠ”", "ì›”ìˆ˜ì…ì´ 100 ~ 300ë§Œì› ë¯¸ë§Œì¸ ë‹¹ì‹ ì—ê²Œ ì•Œë§ëŠ” ê°•ì¢ŒëŠ”", "ì›”ìˆ˜ì…ì´ 300 ~ 500ë§Œì› ë¯¸ë§Œì¸  ë‹¹ì‹ ì—ê²Œ ì•Œë§ëŠ” ê°•ì¢ŒëŠ”", "ìˆ˜ì…ì´ 500ë§Œì› ì´ìƒì¸ ë‹¹ì‹ ì—ê²Œ ì•Œë§ëŠ” ê°•ì¢ŒëŠ”"];
    
            // ê° ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê°’ë“¤ì„ ì„ íƒí•˜ì—¬ ë¬¸ì¥ì„ ìƒì„±í•©ë‹ˆë‹¤.
            let result = genders[parseInt(selectedValues[0])] + " " +
                ages[parseInt(selectedValues[1])] + " " +
                educations[parseInt(selectedValues[2])] + " " +
                jobs[parseInt(selectedValues[3])] + " " +
                marriage[parseInt(selectedValues[4])] + " " +
                incomes[parseInt(selectedValues[5])];
            
            lectureResult.innerHTML = result;
            lectureResult.style.fontWeight = 'bold';
    
            // make_data() í•¨ìˆ˜ë¥¼ ì •ì˜
            function make_data() {
                var data = [
                    { label: "ì»´í“¨í„°", value: 0 },
                    { label: "ì–´í•™", value: 0 },
                    { label: "ë¬¸í™”/êµì–‘", value: 0 },
                    { label: "ì§ì—…ê¸°ìˆ ", value: 0 },
                    { label: "ì‚¬íšŒë´‰ì‚¬", value: 0 },
                    { label: "ê±´ê°•", value: 0 },
                    { label: "ì„±ì¸ê¸°ì´ˆ", value: 0 }
                ];
    
                var gender = [[14.4, 22.5, 24.5, 14.2, 5.4, 13.6, 0.2, 0.1], [14.1, 22.5, 41.2, 11.0, 9.5, 14.2, 0.4, 0.4]];
                var years = [[14.7, 22.5, 35.1, 14.5, 10.4, 16.6, 0, 0.2], [15.3, 10.1, 37.4, 11.1, 10.1, 20.8, 0.5, 0], [8.6, 5.2, 22.6, 4.1, 5.4, 16.2, 0.9, 0]];
                var education = [[6.0, 2.6, 16.0, 5.1, 2.1, 13.7, 1.8, 0], [15.7, 14.9, 27.5, 6.2, 7.2, 10.8, 0, 0.4],
                    [18.2, 22.3, 32.6, 13.5, 8.6, 14.9, 0.2, 0.3], [12.6, 32.2, 42.3, 16.3, 8.7, 14.2 , 0, 0.3]];
                var job = [[11.1, 33.3, 44.4, 13.5, 11.3, 14.1, 0, 0.6], [10.3, 32.4, 43.4, 14.7, 8.2, 14.8, 0.4, 0.5],
                    [12.1, 22.1, 37.4, 13.5, 8.4, 18.0, 0.4, 0.4], [16.9, 11.7, 24.1, 15.3, 6.9, 14.3, 0.2, 0]];
                var marital = [[17.9, 39.6, 31.8, 16.3, 5.8, 5.4, 0, 0.8], [14.3, 18.8, 36.9, 11.6, 9.2, 17.7, 0.3, 0.1],
                    [3.9, 2.5, 18.0, 4.4, 3.3, 13.7, 1.0, 0], [9.6, 8.1, 23.1, 15.2, 4.0, 12.9, 1.0, 0]];
                var income = [[8.7, 11.3, 13.9, 7.6, 4.0, 10.8, 0.9, 0], [11.1, 14.5, 24.9, 14.7, 6.1, 12.6, 0, 0],
                    [13.0, 20.3, 29.8, 13.0, 7.8, 16.6, 0, 0], [16.5, 19.9, 34.9, 8.3 , 8.0, 23.8, 1.6, 0]];
    
                for (var j = 0; j < 7; j++) {
                    data[j].value += gender[selectedValues[0]][j];
                    data[j].value += years[selectedValues[1]][j];
                    data[j].value += education[selectedValues[2]][j];
                    data[j].value += job[selectedValues[3]][j];
                    data[j].value += marital[selectedValues[4]][j];
                    data[j].value += income[selectedValues[5]][j];
                }
    
                data.sort(function(a, b) {
                    return b.value - a.value;
                });
    
                var svg = d3.select("#chart")
                    .append("svg")
                    .attr("width", 800)
                    .attr("height", 800);
    
                var arc = d3.arc()
                    .innerRadius(80)
                    .outerRadius(200);
    
                var pie = d3.pie()
                    .value(function(d) { return d.value; })
                    .sort(null);
    
                var color = d3.scaleOrdinal(d3.schemeCategory10);
    
                var arcs = svg.selectAll("g.arc")
                    .data(pie(data))
                    .enter()
                    .append("g")
                    .attr("class", "arc")
                    .attr("transform", "translate(250, 300)");
    
                arcs.append("path")
                    .attr("d", arc)
                    .attr("fill", function(d, i) { return color(i); });
    
                arcs.append("text")
                    .attr("transform", function(d) {
                        var centroid = arc.centroid(d);
                        return "translate(" + [centroid[0] * 1.7, centroid[1] * 1.7] + ")"; // ê°’ì„ ì¡°ê¸ˆ ë” ëŠ˜ë ¸ìŠµë‹ˆë‹¤.
                    })
                    .attr("dy", "0.35em")
                    .attr("text-anchor", "middle")
                    .text(function(d) {
                        // í¼ì„¼íŠ¸ë¥¼ ê³„ì‚°í•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.
                        return d.data.label ;
                    })
                    .style("font-size", "14px");
    
                var textContainer = d3.select("#chart").append("div")
                    .style("position", "relative")
                    .style("top", "-200px")
                    .style("width", "85%")
                    .style("text-align", "center")
                    .style("z-index", "1");
    
                var labels = data.map(function(d) { return d.label; });  // ë ˆì´ë¸”ë“¤ì„ ë³„ë„ì˜ ë°°ì—´ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
                textContainer.append("p")
                    .style("font-size", "16.5px")
                    .text(labels.join(", ") + " ìˆœìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤ğŸ‘");  // ë°°ì—´ì˜ ìš”ì†Œë“¤ì„ ì—°ê²°í•˜ì—¬ ì¶œë ¥í•©ë‹ˆë‹¤.
            }
        });
    </script>
    
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>
